<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ALTER EGO</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="app">
    <h1>ALTER EGO</h1>

    <!-- Load Character Section -->
    <div class="section">
      <label for="characterCombo">Select Character:</label>
      <select id="characterCombo">
        <option value="">--Select Character--</option>
        <!-- Options populated dynamically -->
      </select>
    </div>

    <!-- Voice Model Selection -->
    <div class="section">
      <label for="voiceModelCombo">Select Voice Model:</label>
      <select id="voiceModelCombo" onchange="changeVoiceModel()">
        <option value="">--Select Voice Model--</option>
        <!-- Options populated dynamically if available -->
      </select>
    </div>

    <!-- Query Input -->
    <div class="section">
      <textarea id="queryInput" placeholder="Type your query here..."></textarea>
      <button id="sendButton">Send Query</button>
    </div>

    <!-- Response Display -->
    <div class="section">
      <h2>Response:</h2>
      <div id="responseDisplay"></div>
    </div>

    <!-- Emotions Display -->
    <div class="section">
      <h2>Detected Emotions:</h2>
      <pre id="emotionsDisplay"></pre>
    </div>

    <!-- Avatar Display -->
    <div class="section">
      <h2>Avatar:</h2>
      <img id="avatarImage" src="./assets/avatars/DEFAULT/neutral.png" alt="Avatar" width="200">
    </div>
  </div>
  <script src="renderer.js"></script>
  <script>
    async function changeVoiceModel() {
      const voiceModelCombo = document.getElementById('voiceModelCombo');
      const selectedModel = voiceModelCombo.value;
      if (!selectedModel) {
        alert('Please select a voice model.');
        return;
      }

      try {
        const response = await axios.post('http://127.0.0.1:8000/change-voice-model', {
          voice_model_name: selectedModel,
        });
        console.log('Voice model changed to:', selectedModel);
        alert(response.data.message);
      } catch (error) {
        console.error(error);
        const errorMessage = error.response ? error.response.data.detail : error.message;
        alert(`Error: ${errorMessage}`);
      }
    }
  </script>
</body>
</html>